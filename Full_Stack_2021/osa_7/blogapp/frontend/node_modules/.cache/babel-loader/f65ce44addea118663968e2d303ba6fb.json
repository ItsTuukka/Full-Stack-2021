{"ast":null,"code":"import axios from 'axios';\nconst baseUrl = '/api/users';\nlet token = null;\nconst STORAGE_KEY = 'loggedBlogAppUser';\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then(response => response.data);\n};\n\nconst setUser = user => {\n  window.localStorage.setItem(STORAGE_KEY, JSON.stringify(user));\n  token = user.token;\n};\n\nconst getUser = () => {\n  const loggedUserJSON = window.localStorage.getItem(STORAGE_KEY);\n\n  if (loggedUserJSON) {\n    const user = JSON.parse(loggedUserJSON);\n    token = user.token;\n    return user;\n  }\n\n  return null;\n};\n\nconst clearUser = () => {\n  localStorage.clear();\n  token = null;\n};\n\nconst getToken = () => token;\n\nexport default {\n  setUser,\n  getUser,\n  clearUser,\n  getToken,\n  getAll\n};","map":{"version":3,"sources":["/home/ytuukka/Full_Stack_2021/osa_7/blogapp/frontend/src/services/user.js"],"names":["axios","baseUrl","token","STORAGE_KEY","getAll","request","get","then","response","data","setUser","user","window","localStorage","setItem","JSON","stringify","getUser","loggedUserJSON","getItem","parse","clearUser","clear","getToken"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,OAAO,GAAG,YAAhB;AAEA,IAAIC,KAAK,GAAG,IAAZ;AAEA,MAAMC,WAAW,GAAG,mBAApB;;AAEA,MAAMC,MAAM,GAAG,MAAM;AACjB,QAAMC,OAAO,GAAGL,KAAK,CAACM,GAAN,CAAUL,OAAV,CAAhB;AACA,SAAOI,OAAO,CAACE,IAAR,CAAcC,QAAD,IAAcA,QAAQ,CAACC,IAApC,CAAP;AACH,CAHD;;AAKA,MAAMC,OAAO,GAAIC,IAAD,IAAU;AACtBC,EAAAA,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4BX,WAA5B,EAAyCY,IAAI,CAACC,SAAL,CAAeL,IAAf,CAAzC;AACAT,EAAAA,KAAK,GAAGS,IAAI,CAACT,KAAb;AACH,CAHD;;AAKA,MAAMe,OAAO,GAAG,MAAM;AAClB,QAAMC,cAAc,GAAGN,MAAM,CAACC,YAAP,CAAoBM,OAApB,CAA4BhB,WAA5B,CAAvB;;AACA,MAAIe,cAAJ,EAAoB;AAChB,UAAMP,IAAI,GAAGI,IAAI,CAACK,KAAL,CAAWF,cAAX,CAAb;AACAhB,IAAAA,KAAK,GAAGS,IAAI,CAACT,KAAb;AACA,WAAOS,IAAP;AACH;;AAED,SAAO,IAAP;AACH,CATD;;AAWA,MAAMU,SAAS,GAAG,MAAM;AACpBR,EAAAA,YAAY,CAACS,KAAb;AACApB,EAAAA,KAAK,GAAG,IAAR;AACH,CAHD;;AAKA,MAAMqB,QAAQ,GAAG,MAAMrB,KAAvB;;AAEA,eAAe;AACXQ,EAAAA,OADW;AAEXO,EAAAA,OAFW;AAGXI,EAAAA,SAHW;AAIXE,EAAAA,QAJW;AAKXnB,EAAAA;AALW,CAAf","sourcesContent":["import axios from 'axios'\n\nconst baseUrl = '/api/users'\n\nlet token = null\n\nconst STORAGE_KEY = 'loggedBlogAppUser'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then((response) => response.data)\n}\n\nconst setUser = (user) => {\n    window.localStorage.setItem(STORAGE_KEY, JSON.stringify(user))\n    token = user.token\n}\n\nconst getUser = () => {\n    const loggedUserJSON = window.localStorage.getItem(STORAGE_KEY)\n    if (loggedUserJSON) {\n        const user = JSON.parse(loggedUserJSON)\n        token = user.token\n        return user\n    }\n\n    return null\n}\n\nconst clearUser = () => {\n    localStorage.clear()\n    token = null\n}\n\nconst getToken = () => token\n\nexport default {\n    setUser,\n    getUser,\n    clearUser,\n    getToken,\n    getAll,\n}\n"]},"metadata":{},"sourceType":"module"}